# Trakt to Letterboxd CSV Converter

A simple Node.js script to convert your Trakt.tv watched and rated movie data into the CSV format required for importing into Letterboxd.

## Motivation

Keeping your movie watching history and ratings synced between different platforms like Trakt and Letterboxd can be a manual chore. Trakt allows users to export their data, but the format isn't directly compatible with Letterboxd's import tool. This script bridges that gap by processing the relevant files from your Trakt export and generating a single CSV file ready for Letterboxd import.

It specifically looks for your watched movie history (`watched-movies.json`) and your movie ratings (`ratings-movies.json`), merges the information, and formats it according to the Letterboxd CSV specification.

## Features

*   Reads `watched-movies.json` and `ratings-movies.json` from your Trakt export.
*   Merges data for movies present in both files (combining watched status, play count, and rating).
*   Uses the **most recent activity date** (either last watched or rated date) as the `WatchedDate` for Letterboxd diary entries.
*   Correctly flags entries as `Rewatch` (`Yes`/`No`) in Letterboxd based on the Trakt play count (>1 means rewatch).
*   Includes `imdbID` and `tmdbID` when available in the Trakt data to ensure accurate movie matching on Letterboxd.
*   Outputs a single `letterboxd_import.csv` file compliant with the Letterboxd import format.

## Prerequisites

*   **Node.js:** You need Node.js installed on your system. Download it from [nodejs.org](https://nodejs.org/). (npm, which is needed for dependencies, is included with Node.js).
*   **Trakt Data Export:** You need to have exported your data from Trakt.tv.

## Getting Your Trakt Data

1.  Log in to your account on [Trakt.tv](https://trakt.tv).
2.  Click on your **profile picture** in the top right corner.
3.  Select **Settings** from the dropdown menu.
4.  Navigate to the **Data** tab within the Settings page.
5.  Scroll down to the **Export Your Data** section.
6.  Click the **"Export Data"** button (or similar text like "Export Again").
    *(The button text may change after the first export)*
7.  Trakt will process your request and send you an email containing a link to download a **ZIP file** with your data.
8.  Download and **extract** the ZIP file.
9.  Locate the required files within the extracted folder:
    *   `<your_trakt_username>/watched/watched-movies.json`
    *   `<your_trakt_username>/ratings/ratings-movies.json`

## Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/tar-gezed/trakt-to-letterboxd.git
    cd trakt-to-letterboxd
    ```

2.  **Install dependencies:**
    The script uses the `csv-writer` library to correctly generate the CSV file.
    ```bash
    npm install
    ```

## Usage

1.  **Copy Trakt Files:** Place the `watched-movies.json` and `ratings-movies.json` files (obtained in the "Getting Your Trakt Data" step) into the root directory of the cloned project (the same directory as the `trakt-to-letterboxd.js` script).

2.  **Run the script:**
    Open your terminal or command prompt, make sure you are in the project directory, and run:
    ```bash
    node trakt-to-letterboxd.js
    ```

3.  **Output:** The script will process the JSON files and create a new file named `letterboxd_import.csv` in the same directory. You'll see console messages indicating the progress.

## Importing to Letterboxd

1.  Go to the [Letterboxd Import page](https://letterboxd.com/import/).
2.  Under "Import your data", click the "Select file..." button.
3.  Choose the `letterboxd_import.csv` file generated by this script.
4.  Letterboxd will process the file and show you a preview. **Review this preview carefully** to ensure movies are matched correctly. You can correct any mismatches or remove unwanted entries (like potential TV show mismatches) at this stage.
5.  Confirm the import.

**Important Notes:**

*   **No Undo:** Be careful when confirming the import on Letterboxd, as there is no undo function.
*   **Large Files:** If your Trakt history is very large, the generated CSV might exceed Letterboxd's file size limit (currently around 1MB). If this happens, you may need to manually split the `letterboxd_import.csv` file into smaller chunks, ensuring the header row (`imdbID,tmdbID,Title,Year,Rating10,WatchedDate,Rewatch`) is present at the top of *each* chunk.
*   **Date Logic:** The script uses the *latest* timestamp between `last_watched_at` (from watched data) and `rated_at` (from ratings data) to populate the `WatchedDate` column in the Letterboxd CSV. If only one date exists (e.g., a movie was only rated but never marked watched with a date, or vice-versa), that date will be used.
*   **Ratings:** Trakt ratings (1-10) are placed in the `Rating10` column, which Letterboxd will automatically convert to its 0.5-5 star scale upon import.

## Contributing

Contributions are welcome! If you find a bug or have an idea for an improvement, please open an issue or submit a pull request.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
